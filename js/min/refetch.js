!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self,function(){var r=e.refetch,n=e.refetch=t();n.noConflict=function(){return e.refetch=r,n}}())}(this,(function(){"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e){return function(){return e}}function o(e){return"function"==typeof e}function i(e){return"[object Object]"===Object.prototype.toString.call(e)}function u(e){return(u=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e})(e)}function c(e,t){return u(e=+e)?e:u(t=+t)?t:1/0}function f(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1/0;if(e=c(e),(t=c(t))>(r=c(r))){var n=[r,t];t=n[0],r=n[1]}return Math.min(Math.max(t,e),r)}function a(e,t){return null===e?void 0:o(e)?e:t}function s(e,t){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];return r=!1!==r,Object.defineProperties(e,Object.keys(t).reduce((function(e,n){return e[n]={enumerable:r,value:t[n]},e}),{}))}function b(e,t){function r(e){return u&&clearTimeout(u),u=0,(r=function(e){o(e)&&e()})(e)}var i,u=0,c=new AbortController,f=c.abort.bind(c),a=c.signal;return s((a.aborted?r(Promise.reject):new Promise((function(t,n){u=setTimeout(t,isNaN(e=+e)||0>e?1e3:e),a.addEventListener("abort",(function(){return r(n)}))}))).then(n(!0),n(!1)).then((function(e){var r=e?t:i;return o(r)?r():r})),{clear:function(e){return i=e,f(),this}},!1)}var m=n(100),l=n(0),d=function(e,t){return s(e,{retries:c(t,12)})},h=s(Object.create(null),{default:d(m),fibonacci:d((function(e){return e=Math.min(e,12)||0,Math.min(function(e){var t=[];return function e(r){return 0<r&&t[r]?t[r]:t[r]=0>=r?0:2>=r?1:e(r-1)+e(r-2)}(e)}(e)*e,1e3)})),immediately:d(l),progressive:d((function(e){return e=Math.min(e,12)||0,100*Math.min(Math.pow(2,e>>2),5)}))});function p(e){var t,n,u,m,l,d,v=i(e)?e:{},y=v.timeout,j=v.retries,O=v.onabort,P=v.onretry,w=v.ontimeout,g=i(j)?j:o(j)?{sequence:j}:{max:j},x=g.max,E=g.sequence;o(O)&&(m=O),o(P)&&(l=P),o(w)&&(d=w),u=o(E)?E:h.default,x=c(x),y=c(y),x===1/0||1>x?o(E)&&(n=1):n=f(x,1,u.retries),y===1/0||0>y||(t=f(y)),Object.defineProperty(this,"fetch",{get:function(){function e(){a&&a.abort()}var c,f,a,h=u;return s((function(u,s){e(),c=0,f=0;var p=(a=new AbortController).signal,v=function(){try{return new DOMException("Aborted","AbortError")}catch(t){var e=new Error("Aborted");return e.name="AbortError",e}}(),y=i(s)?s:{},j=function(e){return function(t){return o(e)&&e(r(r({},i(t)?t:{}),{},{fetch:{resource:u,options:y}}))}},O=function(){var e=b(c,(function(){return o(l)&&0<f&&j(l)({retry:{current:f,delay:c,max:n}}),fetch(u,r(r({},y),{},{signal:p})).then((function(e){return e.ok?e:Promise.reject(e)})).catch((function(e){return"AbortError"!==e.name&&n&&f++<n?(c=h(f),O()):Promise.reject(e)}))})),t=new Promise((function(t,r){p.addEventListener("abort",(function(){e.clear((function(){return r(v)}))}))}));return Promise.race([e,t])};return(p.aborted?Promise.reject(v):new Promise((function(r,n){var i,u=new Promise((function(e,t){p.addEventListener("abort",(function(){return t(v)}))}));"number"==typeof t&&(i=b(t,(function(){e(),o(d)&&j(d)({timeout:t})}))),Promise.race([u,O()]).catch((function(e){return void 0!==i&&o(i.clear)?i.clear((function(){return Promise.reject(e)})):Promise.reject(e)})).then(r,n)}))).catch((function(e){return"AbortError"===e.name?(o(m)&&j(m)(),!1):Promise.reject(e)}))}),{abort:e})}}),s(this,{fresh:function(e){return new p(e)},extend:function(e){var r=i(e)?e:{},s=r.timeout,b=r.retries,h=r.onabort,v=r.onretry,y=r.ontimeout,j=i(b)?b:o(b)?{sequence:b}:{max:b},O=j.max,P=j.sequence;return P=o(P)?P:u,null===O?O=void 0:O=f((O=c(O))===1/0||1>O?n:O,1,P.retries),null===s?s=void 0:s=(s=c(s))===1/0||0>s?t:f(s),new p({timeout:s,retries:{max:O,sequence:P},onabort:a(h,m),onretry:a(v,l),ontimeout:a(y,d)})}},!1)}function v(e){return new p(e)}return s(v,r(r({},h),{},{timeout:5e3}),!1),v}));