function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach(function(t){_defineProperty(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}!function(e){"use strict";var t=function(){var e=r(100),t=r(0),n=function(e,t){return a(e,{retries:i(t,12)})};return a(Object.create(null),{default:n(e),fibonacci:n(function(e){return Math.min((t=[],function e(r){return r>0&&t[r]?t[r]:t[r]=r<=0?0:r<=2?1:e(r-1)+e(r-2)}(e)*e),1e3);var t}),immediately:n(t),progressive:n(function(e){return 100*Math.min(Math.pow(2,e>>2),5)})})}();function r(e){return function(){return e}}function n(e){return"function"==typeof e}function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function i(e,t){return Number.isInteger(e=+e)?e:Number.isInteger(t)?t:1/0}function u(e,t,r){if(void 0===t&&(t=0),void 0===r&&(r=1/0),e=i(e),(t=i(t))>(r=i(r))){var n=[r,t];t=n[0],r=n[1]}return Math.min(Math.max(t,e),r)}function c(e,t){return null===e?void 0:n(e)?e:t}function f(e,t){e=!Number.isNaN(e=+e)&&e>=0?e:1e3;var r=0;return a(new Promise(function(o){r=setTimeout(function(){o(Promise.resolve().then(function(){if(r&&n(t))return t()}))},e)}),{end:function(e){return clearTimeout(r)&&(r=0),Promise.resolve().then(e)}})}function a(e,t){var r=!1!==arguments[2];return Object.defineProperties(e,Object.fromEntries(Object.entries(t).map(function(e){var t=e[0],n=e[1];return[t,{enumerable:r,value:n}]})))}function s(e){var r,b,m,l,d,p,j=o(e)?e:{},v=j.timeout,y=j.retries,P=j.onabort,O=j.onretry,h=j.ontimeout,w=o(y)?y:n(y)?{sequence:y}:{max:y},g=w.max,x=w.sequence;n(P)&&(l=P),n(O)&&(d=O),n(h)&&(p=h),m=n(x)?x:t.default,g=i(g),v=i(v),g===1/0||g<1?n(x)&&(b=1):b=u(g,1,m.retries),v===1/0||v<0||(r=u(v)),Object.defineProperty(this,"fetch",{get:function(){var e,t,i,u=m;function c(){i&&i.abort()}return a(function(a,s){c(),e=0,t=0;var m=(i=new AbortController).signal,j=new DOMException("Aborted","AbortError"),v=_objectSpread(_objectSpread({},o(s)?s:{}),{},{signal:m});return(m.aborted?Promise.reject(j):new Promise(function(o,i){var s,l=new Promise(function(e,t){m.addEventListener("abort",function(){return t(j)})});"number"==typeof r&&(s=f(r,function(){c(),n(p)&&p()})),Promise.race([l,function r(){var o=f(e,function(){return n(d)&&t>0&&d({count:t,delay:e,max:b}),fetch(a,v).then(function(e){return e.ok?e:Promise.reject(e)}).catch(function(n){return"AbortError"!==n.name&&b&&t++<b?(e=u(t),r()):Promise.reject(n)})}),i=new Promise(function(e,t){m.addEventListener("abort",function(){o.end(function(){return t(j)})})});return Promise.race([o,i])}()]).catch(function(e){return void 0!==s&&n(s.end)?s.end(function(){return Promise.reject(e)}):Promise.reject(e)}).then(o,i)})).catch(function(e){return"AbortError"===e.name?(n(l)&&l(),!1):Promise.reject(e)})},{abort:c})}}),a(this,{fresh:function(e){return new s(e)},extend:function(e){var t=o(e)?e:{},f=t.timeout,a=t.retries,j=t.onabort,v=t.onretry,y=t.ontimeout,P=o(a)?a:n(a)?{sequence:a}:{max:a},O=P.max,h=P.sequence;return h=n(h)?h:m,O=null===O?void 0:u((O=i(O))===1/0||O<1?b:O,1,h.retries),new s({timeout:f=null===f?void 0:(f=i(f))===1/0||f<0?r:u(f),retries:{max:O,sequence:h},onabort:c(j,l),onretry:c(v,d),ontimeout:c(y,p)})}},!1)}function b(e){return new s(e)}a(b,_objectSpread(_objectSpread({},t),{},{timeout:5e3}),!1),a(e,{refetch:b})}("undefined"!=typeof self?self:this);
